### Цели контракта

Разработать смарт-контракт на Solidity, который будет реализовывать логику "кликер-игры" с регистрацией пользователей, накоплением баланса через клики, возможностью переводов, системой бонусов и покупкой улучшений. Контракт будет также иметь функции управления для администратора.

---

### Основные функции и логика контракта

1. **Регистрация пользователя**
    
    - Функция: `registerUser`
    - Параметры:
        - `name` (строка) — имя пользователя.
    - Описание:
        - При вызове функции пользователь регистрируется в системе.
        - У каждого пользователя должны быть следующие данные:
            - `name` — имя пользователя.
            - `balance` — баланс пользователя (изначально равен 0).
            - `clicks` — количество кликов пользователя (изначально равно 0).
            - `clickMultiplier` — множитель кликов (изначально равен 1).
            - `withdrawableAmount` — сумма, которую пользователь может вывести (изначально 0).
            - `lastClickTime` — время последнего клика для проверки задержки.
    - Условия:
        - Если пользователь уже зарегистрирован, регистрация должна завершаться с ошибкой.
        - В случае, если пользователь регистрируется по реферальной ссылке (если приглашающий передан в параметрах), то пригласившему начисляется бонус в размере 500 единиц токена при регистрации нового пользователя.
2. **Функция клика**
    
    - Функция: `click`
    - Описание:
        - Увеличивает баланс пользователя в зависимости от значения `clickMultiplier`.
        - `clicks` пользователя увеличивается на 1.
        - Если с момента последнего клика прошло 10 секунд или более, баланс увеличивается на `clickMultiplier`.
        - Если пользователь кликает в течение 10 секунд после последнего клика, происходит накопление для "двойного клика" — следующий кликаемый баланс будет умножен на 2.
    - Модификаторы:
        - Модификатор для проверки регистрации пользователя: `onlyRegistered`.
        - Модификатор проверки времени последнего клика: `cooldownCheck`.
3. **Перевод средств другому пользователю**
    
    - Функция: `transfer`
    - Параметры:
        - `recipient` (адрес) — адрес получателя.
        - `amount` (uint) — сумма перевода.
    - Описание:
        - Переводит определенное количество баланса от одного пользователя другому.
        - Если получатель не зарегистрирован, он все равно может получить средства, и когда он зарегистрируется, пригласившему начисляется бонус в размере 500 единиц токена.
    - Условия:
        - Баланс отправителя должен быть больше или равен сумме перевода.
        - Если получатель не зарегистрирован на момент перевода, его баланс начисляется при регистрации.
4. **Покупка улучшений для пользователя**
    
    - Функция: `purchaseUpgrade`
    - Описание:
        - Позволяет пользователю улучшить свой `clickMultiplier`, тратя свои накопленные клики.
        - Стоимость улучшения рассчитывается как общее количество кликов всех пользователей, деленное на количество зарегистрированных пользователей.
        - Снимает соответствующую сумму с баланса пользователя.
    - Условия:
        - Пользователь должен иметь достаточно баланса для покупки улучшения.
        - Если покупка успешна, `clickMultiplier` пользователя увеличивается.
5. **Админская функция выплаты токенов и обнуление баланса пользователя**
    
    - Функция: `adminWithdraw`
    - Параметры:
        - `userAddress` (адрес) — адрес пользователя, для которого выполняется операция.
        - `amount` (uint) — сумма для вывода.
    - Описание:
        - Функция доступна только администратору.
        - Позволяет администратору вывести указанное количество токенов для пользователя и обнулить его баланс.
    - Условия:
        - Администратор проверяет, что баланс пользователя достаточен для выплаты.
        - Баланс пользователя обнуляется после успешного вывода.